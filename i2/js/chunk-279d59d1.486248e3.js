(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-279d59d1","chunk-2d225016"],{"102c":function(e,t,a){"use strict";var n=a("f877"),o=a.n(n);o.a},"244a":function(e,t,a){},8593:function(e,t,a){"use strict";a.d(t,"k",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"j",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"w",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"q",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"p",(function(){return f})),a.d(t,"v",(function(){return p})),a.d(t,"r",(function(){return h})),a.d(t,"n",(function(){return g})),a.d(t,"s",(function(){return b})),a.d(t,"o",(function(){return k})),a.d(t,"d",(function(){return v})),a.d(t,"l",(function(){return y})),a.d(t,"u",(function(){return C})),a.d(t,"t",(function(){return I})),a.d(t,"m",(function(){return O})),a.d(t,"a",(function(){return D})),a.d(t,"i",(function(){return _})),a.d(t,"f",(function(){return j}));a("7cfd");var n=a("8f4d");function o(e){return Object(n["a"])({url:n["a"].adornUrl("admin/permissionList?module="+e.module+"&accessToken="+e.accessToken),method:"post"})}function s(e){return Object(n["a"])({url:n["a"].adornUrl("admin/permissionDel?id="+e.id+"&accessToken="+e.accessToken),method:"post"})}function r(e){return Object(n["a"])({url:n["a"].adornUrl("admin/permissionUpdate?userId="+e.userId+"&id="+e.id+"&parentId="+e.parentId+"&module="+e.module+"&style="+e.style+"&name="+e.name+"&icon="+e.icon+"&path="+e.path+"&url="+e.url+"&accessToken="+e.accessToken),method:"post"})}function i(e){return Object(n["a"])({url:n["a"].adornUrl("admin/addPermission?userId="+e.userId+"&parentId="+e.parentId+"&module="+e.module+"&style="+e.style+"&name="+e.name+"&icon="+e.icon+"&path="+e.path+"&url="+e.url+"&accessToken="+e.accessToken),method:"post"})}function c(e){return Object(n["a"])({url:n["a"].adornUrl("admin/setSortOrder?id="+e.id+"&parentId="+e.parentId+"&sx="+e.sx+"&module="+e.module+"&accessToken="+e.accessToken),method:"get"})}function d(e){return Object(n["a"])({url:n["a"].adornUrl("admin/addRole?userId="+e.userId+"&name="+e.name+"&description="+e.description+"&accessToken="+e.accessToken),method:"post"})}function l(e){return Object(n["a"])({url:n["a"].adornUrl("admin/queryRolePermission?roleId="+e.roleId+"&accessToken="+e.accessToken),method:"post"})}function u(e){return Object(n["a"])({url:n["a"].adornUrl("admin/compileRole?userId="+e.userId+"&id="+e.id+"&description="+e.description+"&accessToken="+e.accessToken),method:"post"})}function m(e){return Object(n["a"])({url:n["a"].adornUrl("admin/deleteRole?id="+e.id+"&accessToken="+e.accessToken),method:"post"})}function f(e){return Object(n["a"])({url:n["a"].adornUrl("admin/queryRole?userId="+e.userId+"&accessToken="+e.accessToken),method:"post"})}function p(e){return Object(n["a"])({url:n["a"].adornUrl("admin/rolePermission?userId="+e.userId+"&roleId="+e.roleId+"&permissionId="+e.permissionId+"&accessToken="+e.accessToken),method:"post"})}function h(e){return Object(n["a"])({url:n["a"].adornUrl("admin/quertUser"),method:"get",params:n["a"].adornParams(e,!1,"qs")})}function g(e){return Object(n["a"])({url:n["a"].adornUrl("admin/departmentDropDownBox"),method:"post",data:n["a"].adornData(e,!1,"qs")})}function b(e){return Object(n["a"])({url:n["a"].adornUrl("admin/queryRole"),method:"post",data:n["a"].adornData(e,!1,"qs")})}function k(e){return Object(n["a"])({url:n["a"].adornUrl("admin/queryTLaunchingTheCategoryquertList"),method:"get",params:n["a"].adornParams(e,!1)})}function v(e){return Object(n["a"])({url:n["a"].adornUrl("admin/addUser"),method:"post",data:n["a"].adornData(e,!1,"qs")})}function y(e){return Object(n["a"])({url:n["a"].adornUrl("admin/userOnedandT"),method:"get",params:n["a"].adornParams(e,!1)})}function C(e){return Object(n["a"])({url:n["a"].adornUrl("admin/userCzPassword"),method:"get",params:n["a"].adornParams(e,!1)})}function I(e){return Object(n["a"])({url:n["a"].adornUrl("admin/userSecondaryPassword"),method:"get",params:n["a"].adornParams(e,!1)})}function O(e){return Object(n["a"])({url:n["a"].adornUrl("admin/queryDepartment?page=".concat(e.page,"&size=").concat(e.size)),method:"post"})}function D(e){return Object(n["a"])({url:n["a"].adornUrl("admin/addDepartment?userId=".concat(e.userId,"&title=").concat(e.title,"&coding=").concat(e.coding,"&describe=").concat(e.describe,"&parentId=").concat(e.parentId,"&roleCount=").concat(e.roleCount)),method:"post"})}function _(e){return Object(n["a"])({url:n["a"].adornUrl("admin/compileDepartment?userId=".concat(e.userId,"&id=").concat(e.id,"&title=").concat(e.title,"&coding=").concat(e.coding,"&describe=").concat(e.describe,"&parentId=").concat(e.parentId,"&roleCount=").concat(e.roleCount)),method:"post"})}function j(e){return Object(n["a"])({url:n["a"].adornUrl("admin/departmentDel?id=".concat(e.id)),method:"post"})}},d81f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roleManage"},[a("div",{staticClass:"leftMenu"},[a("el-button",{staticClass:"addBut",attrs:{type:"primary"},on:{click:function(t){e.addDialog=!0}}},[e._v("添加")]),a("el-button",{staticClass:"editBut",attrs:{type:"primary"},on:{click:function(t){e.pitchOn2()&&e.editForm()}}},[e._v("编辑")]),a("el-button",{staticClass:"delBut",attrs:{type:"primary"},on:{click:function(t){e.pitchOn2()&&(e.deleteDialog=!0)}}},[e._v("删除")]),a("div",{staticClass:"menuList"},[a("table",{attrs:{border:"1",cellspacing:"1"}},e._l(e.roleList,(function(t,n){return a("tr",{key:n},[a("td",{staticClass:"tal_tit",class:{active:e.roleActive==n},on:{click:function(a){e.isokRole(t),e.roleActive=n}}},[e._v("\n            "+e._s(t.description)+"\n          ")])])})),0)])],1),a("div",{staticClass:"right"},[a("div",{staticClass:"coat1"},[a("div",{staticClass:"coat2"},[a("div",{staticClass:"menuRes"},[e._m(0),a("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"","default-checked-keys":e.defaultMenu,props:e.defaultProps},on:{"check-change":e.handleCheckChange}})],1),a("el-button",{staticClass:"addBut",attrs:{type:"primary"},on:{click:function(t){e.menuList.length<=0?e.$message.error("请至少选择一条数据!"):e.rolePermission()}}},[e._v("保存")])],1)])]),a("div",{staticClass:"dialog"},[a("fly-dialog",{attrs:{title:"添加角色",show:e.addDialog},on:{"update:show":function(t){e.addDialog=t}}},[a("div",{staticClass:"from"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"hide-required-asterisk":e.asterisk,"label-width":"50%"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1),a("div",{staticClass:"butCoat"},[a("el-button",{staticClass:"canBut",on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"okBut",attrs:{type:"primary"},on:{click:function(t){return e.addRole("form")}}},[e._v("确 定")])],1)]),a("fly-dialog",{attrs:{title:"编辑角色",show:e.editDialog},on:{"update:show":function(t){e.editDialog=t}}},[a("div",{staticClass:"from"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"hide-required-asterisk":e.asterisk,"label-width":"50%"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1),a("div",{staticClass:"butCoat"},[a("el-button",{staticClass:"canBut",on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"okBut",attrs:{type:"primary"},on:{click:function(t){return e.editRole("form")}}},[e._v("确 定")])],1)]),a("fly-dialog",{attrs:{title:"删除",show:e.deleteDialog},on:{"update:show":function(t){e.deleteDialog=t}}},[a("span",{staticClass:"content"},[e._v("确定删除？")]),a("div",{staticClass:"butCoat"},[a("el-button",{staticClass:"canBut",on:{click:function(t){e.deleteDialog=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"okBut",attrs:{type:"primary"},on:{click:function(t){return e.deleteRole()}}},[e._v("确 定")])],1)])],1)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",[e._v("菜单资源")])])}],s=(a("7cfd"),a("4634"),a("8593")),r=a("e04f"),i=a.n(r),c=a("e30b"),d={name:"roleManage",components:{FlyDialog:c["a"]},data:function(){return{asterisk:!0,addDialog:!1,editDialog:!1,deleteDialog:!1,roleActive:0,okRole:"",roleList:[{name:"管理员"},{name:"超级管理员"},{name:"游客"}],menuList:[],data:[],defaultMenu:[],form:{name:"",desc:""},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],desc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},defaultProps:{children:"children",label:"label"}}},mounted:function(){this.queryRole()},methods:{queryRole:function(){var e=this,t=this;Object(s["p"])({userId:i.a.get("userId"),accessToken:i.a.get("ac_token")}).then((function(a){var n=a.data;n&&200===n.code?(t.roleList=n.data,e.isokRole(t.roleList[0])):e.$message({message:"获取角色信息失败!",type:"error"})})),this.addDialog=!1},rolePermission:function(){var e=this,t=this;Object(s["v"])({userId:i.a.get("userId"),roleId:this.okRole.id,permissionId:this.unique(this.menuList),accessToken:i.a.get("ac_token")}).then((function(a){var n=a.data;n&&200===n.code?t.$message({message:"角色和菜单关系修改成功！!",type:"success"}):e.$message({message:"角色和菜单关系修改失败!",type:"error"})}))},queryRolePermission:function(){var e=this,t=this;Object(s["q"])({roleId:this.okRole.id,accessToken:i.a.get("ac_token")}).then((function(a){var n=a.data;n&&200===n.code?t.data=t.meunData(n.data.permission):e.$message({message:"获取角色和菜单关系失败!",type:"error"})}))},meunData:function(e){var t=this,a=[];return e.forEach((function(e){var n={};e.list.length>=1?(n={id:e.id,label:e.name,children:t.meunData(e.list)},a.push(n)):(n={id:e.id,label:e.name,items:[]},a.push(n)),e.bool&&t.defaultMenu.push(e.id)})),a},isokRole:function(e){this.okRole=e,this.defaultMenu=[],this.menuList=[],this.queryRolePermission(),this.menuList=this.defaultMenu},pitchOn2:function(){var e=!1;return""!==this.okRole?e=!0:this.$message.error("请至少选择一条数据!"),e},editForm:function(){this.form.name=this.okRole.name,this.form.desc=this.okRole.description,this.editDialog=!0},addRole:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(s["c"])({userId:i.a.get("userId"),name:t.form.name,description:t.form.desc,accessToken:i.a.get("ac_token")}).then((function(e){var n=e.data;n&&200===n.code?(a.queryRole(),a.$message({message:"添加角色成功！!",type:"success"})):t.$message({message:"添加角色失败!",type:"error"})})),t.addDialog=!1}))},editRole:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(s["e"])({userId:i.a.get("userId"),id:t.okRole.id,description:t.form.desc,accessToken:i.a.get("ac_token")}).then((function(e){var n=e.data;n&&200===n.code?(a.queryRole(),a.$message({message:"角色信息修改成功！!",type:"success"})):t.$message({message:"角色信息修改失败!",type:"error"})})),t.editDialog=!1}))},deleteRole:function(){var e=this,t=this;Object(s["h"])({id:this.okRole.id,accessToken:i.a.get("ac_token")}).then((function(a){var n=a.data;n&&200===n.code?(t.queryRole(),t.$message({message:"删除角色成功！!",type:"success"})):e.$message({message:"删除角色失败!",type:"error"})})),this.deleteDialog=!1},unique:function(e){for(var t=[],a=0;a<e.length;a++)-1===t.indexOf(e[a])&&t.push(e[a]);return t},deleteData:function(e,t){var a=this.unique(e),n=a.indexOf(t);a.splice(n,1),this.menuList=a},handleCheckChange:function(e,t,a){t&&void 0===e.children&&this.menuList.push(e.id),!t&&void 0===e.children&&this.deleteData(this.menuList,e.id)}}},l=d,u=(a("102c"),a("f4a3"),a("6691")),m=Object(u["a"])(l,n,o,!1,null,"618315da",null);t["default"]=m.exports},e30b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,"before-close":e.handleClose,width:e.width,"close-on-click-modal":e.flag,"modal-append-to-body":e.flag2,modal:e.modal},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("update:show",!1)}}},[a("div",{staticClass:"body-content"},[a("div",{staticClass:"fly-dialog-title"},[a("span",[e._v(e._s(e.title))])]),a("div",{staticClass:"fly-dialog-body"},[[e._t("default")]],2)]),e._t("ft",null,{slot:"footer"})],2)},o=[],s={props:{show:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"620px"},modal:{type:Boolean,default:!0},flag:{type:Boolean,default:!1}},data:function(){return{flag2:!1,visible:this.show}},watch:{show:function(){this.visible=this.show}},methods:{handleClose:function(e){this.$emit("beforeCloseDialog"),e()}}},r=s,i=a("6691"),c=Object(i["a"])(r,n,o,!1,null,null,null);t["a"]=c.exports},f4a3:function(e,t,a){"use strict";var n=a("244a"),o=a.n(n);o.a},f877:function(e,t,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e187718"],{"06fe":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-form",{ref:"morePhoneForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.morePhoneForm}},[n("el-form-item",{attrs:{label:"呼叫时间",prop:"time"}},[n("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.morePhoneForm.time,callback:function(t){e.$set(e.morePhoneForm,"time",t)},expression:"morePhoneForm.time"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1),n("el-form-item",[n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.resetForm("morePhoneForm")}}},[e._v("重置\n      ")])],1)],1),n("div",{staticClass:"countType"},[n("el-button",{staticClass:"but",class:{typeActive:1==e.countType},attrs:{size:"mini"},on:{click:function(t){e.countType=1,e.onSubmit()}}},[e._v("通话频次")]),n("el-button",{staticClass:"but",class:{typeActive:2==e.countType},attrs:{size:"mini"},on:{click:function(t){e.countType=2,e.onSubmit()}}},[e._v("通话时长")])],1),n("div",{attrs:{id:"comPhone"}})],1)},r=[],i=(n("8f42"),n("40c5"),n("23cc"),n("cc1d"),n("7cfd"),n("c041"),n("4634"),n("fb92")),a=n("d84b"),s=n.n(a),c={data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},countType:1,morePhoneForm:{time:""},data:[{name:"15111111111",x:300,y:300},{name:"15122222222",x:550,y:250},{name:"15311111111",x:800,y:300},{name:"15411111111",x:550,y:300},{name:"15611111111",x:550,y:350}],links:[{source:"15111111111",target:"15122222222",label:{normal:{show:!0,formatter:"12121"}}},{source:"15122222222",target:"15311111111"},{source:"15111111111",target:"15411111111"},{source:"15411111111",target:"15311111111"},{source:"15111111111",target:"15611111111"},{source:"15611111111",target:"15311111111"}],morePhone:[],morePhone2:[],dataTest:[{list:[{baseStationCode:"1DF1",otherPartyPhone:"13530051234",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"1353005123",communicationTime:"30分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530053333",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530054455",communicationTime:"20分钟"}],phone:"13511114444"},{list:[{baseStationCode:"1DF1",otherPartyPhone:"13530052182",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"1353005222",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530053333",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530054455",communicationTime:"20分钟"}],phone:"13511111111"},{list:[{baseStationCode:"1DF1",otherPartyPhone:"1353005442",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"1353005222",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530053333",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530054455",communicationTime:"20分钟"}],phone:"13511114344"},{list:[{baseStationCode:"1DF1",otherPartyPhone:"13530053212",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"1353005222",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530053333",communicationTime:"20分钟"},{baseStationCode:"1DF1",otherPartyPhone:"13530054455",communicationTime:"20分钟"}],phone:"13512214444"}]}},mounted:function(){this.morePhone=JSON.parse(localStorage.getItem("morePhone"))},methods:{onSubmit:function(){var e=this.morePhone;this.morePhone2=e;var t=this.morePhoneForm;null!=t.time&&this.eachPhone(this.morePhone2),this.data=this.disposeData(this.dataTest),this.links=this.disposeLinks(this.data),this.comPhone()},eachPhone:function(e){var t=this,n=[];e.forEach((function(e){n.push(t.timeSizer(e))})),this.morePhone2=n},timeSizer:function(e){var t=this,n=this.morePhoneForm.time,o={},r=[];return e.list.forEach((function(e){t.compareTime(e.beginTime,n[0],n[1])&&r.push(e)})),o.list=r,o.phone=e.phone,o},compareTime:function(e,t,n){function o(e){return new Date(e.replace(/-/g,"/")).getTime()}e=Object(i["a"])(new Date(e),"yyyy-MM-dd hh:mm:ss"),t=Object(i["a"])(new Date(t),"yyyy-MM-dd hh:mm:ss"),n=Object(i["a"])(new Date(n),"yyyy-MM-dd hh:mm:ss");var r=o(t),a=o(n),s=o(e);return!(s<r||s>a)},disposeData:function(e){var t=[],n={},o=[],r=0;e.forEach((function(e,t){var n={};r=(t+1)%2===0?550-50*(parseInt(t/2)+1):550+50*(parseInt(t/2)+1),n.type=1,n.name=e.phone,n.y=300,n.x=r,o.push(n)}));var i=this.samePhone(e),a=[],s=0;return i.forEach((function(e,t){var n={};s=(t+1)%2===0?300-10*(parseInt(t/2)+1):300+10*(parseInt(t/2)+1),n.type=2,n.name=e.otherPartyPhone,n.x=550,n.y=s,a.push(n)})),n.self=o,n.other=a,t.push.apply(t,o.concat(a)),t},disposeLinks:function(e){for(var t=[],n=e.filter((function(e){return 1===e.type})),o=e.filter((function(e){return 2===e.type})),r=0;r<n.length;r++)for(var i=0;i<o.length;i++){var a={};a.source=n[r].name,a.target=o[i].name,a.label={normal:{show:!0,formatter:this.callInfo(n[r].name,o[i].name,this.countType)}},t.push(a)}return t},callInfo:function(e,t,n){var o=this,r=this.dataTest,i=0,a=r.filter((function(t){return t.phone==e}));if(1===n)i=a[0].list.filter((function(e){return e.otherPartyPhone==t})).length;else if(2===n){var s=a[0].list.filter((function(e){return e.otherPartyPhone==t}));s.forEach((function(e){i=o.timeTotal(i,e.communicationTime)}))}return String(i)},timeTotal:function(e,t){return e=this.timeToSec(e),t=this.timeToSec(t),this.formatDuring(e+t)},formatDuring:function(e){var t=parseInt(e%864e5/36e5),n=parseInt(e%36e5/6e4),o=parseInt(e%6e4/1e3),r=o+"秒";return t>0?r=t+"小时"+n+"分钟"+o+"秒":n>0&&(r=n+"分钟"+o+"秒"),r},timeToSec:function(e){var t,n,o,r=e.toString().replace(/分钟/g,"分"),i=r.toString().replace(/小时/g,"时");t=i.includes("时")?i.indexOf("时"):0,n=i.includes("分")?i.indexOf("分"):0,o=i.includes("秒")?i.indexOf("秒"):0;var a=0,s=0,c=0;0===t&&0===n&&0===o&&(c=i),0!==t&&(a=i.substring(0,t)),0!==n&&(s=i.substring(0===t?0:t+1,n)),0!==o&&(c=i.substring(0===n?0:n+1,o));var m=Number(3600*a)+Number(60*s)+Number(c);return 1e3*m},samePhone:function(e){var t=this.dataTest;function n(e,t){return e.filter((function(e){return t.some((function(t){return e.otherPartyPhone===t.otherPartyPhone}))}))}for(var o=[],r=t[0],i=1;i<t.length-1;i++){var a=r.list,s=t[i].list;r.list=n(a,s),o=n(a,s)}return o},timeChange:function(e){var t=e.map((function(e){var t=new Date(e),n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();return n}));return t},resetForm:function(e){this.$refs[e].resetFields()},comPhone:function(){var e=this,t=s.a.init(document.getElementById("comPhone")),n={backgroundColor:"transparent",series:[{name:"数据",type:"graph",layout:"none",roam:!0,label:{show:!0,fontWeight:"bold",align:"center"},links:e.links,data:e.data}]};t.setOption(n)}}},m=c,u=(n("fff1"),n("6691")),h=Object(u["a"])(m,o,r,!1,null,"014b9eea",null);t["default"]=h.exports},"3a06":function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},7130:function(e,t,n){var o=n("2498"),r=n("3038"),i=n("0cc1"),a=n("3a06"),s="["+a+"]",c="​",m=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),h=function(e,t,n){var r={},s=i((function(){return!!a[e]()||c[e]()!=c})),m=r[e]=s?t(f):a[e];n&&(r[n]=m),o(o.P+o.F*s,"String",r)},f=h.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(m,"")),2&t&&(e=e.replace(u,"")),e};e.exports=h},"7f9a":function(e,t,n){},"8f42":function(e,t,n){"use strict";var o=n("3f8b"),r=n("549d"),i=n("6077"),a=n("1e01"),s=n("2ab1"),c=n("0cc1"),m=n("cb2e").f,u=n("e493").f,h=n("d3d8").f,f=n("7130").trim,l="Number",p=o[l],d=p,P=p.prototype,y=i(n("65c3")(P))==l,g="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var n,o,r,i=t.charCodeAt(0);if(43===i||45===i){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+t}for(var a,c=t.slice(2),m=0,u=c.length;m<u;m++)if(a=c.charCodeAt(m),a<48||a>r)return NaN;return parseInt(c,o)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(y?c((function(){P.valueOf.call(n)})):i(n)!=l)?a(new d(b(t)),n,p):b(t)};for(var v,T=n("f9a5")?m(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;T.length>S;S++)r(d,v=T[S])&&!r(p,v)&&h(p,v,u(d,v));p.prototype=P,P.constructor=p,n("a6d5")(o,l,p)}},fff1:function(e,t,n){"use strict";var o=n("7f9a"),r=n.n(o);r.a}}]);